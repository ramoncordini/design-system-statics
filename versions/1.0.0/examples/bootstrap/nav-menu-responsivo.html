<!doctype html>
<html lang="pt-br" class="example">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="../../dist/css/bootstrap.css" rel="stylesheet">
        <link href="../../examples/examples.css" rel="stylesheet">
    </head>
<body>

    
   
    <div class="container">
        <div class="row">
            <div class="col">

                <!--
                <a href="javascript:;" class="scielo__menu-responsivo" data-rel="#mainMenu" title="Abrir menu">
                  <span class="material-icons-outlined scielo-ico-menu">menu</span>
                  <span class="material-icons-outlined scielo-ico-menu-opened">menu_open</span>
                </a>
                
                <div class="logo-svg">
                    <a href="/" title="Ir para a homepage da coleção: {{ coll_macro.get_collection_name() }}"></a>
                </div>
                -->
               
                <div id="touchSideSwipe" class="touch-side-swipe">
                    <div class="row">
                        <div class="col text-center">
                          <div class="scielo__logo-scielo--small"></div>
                        </div>
                    </div>
                    <nav>
                        <ul>
                          <li>
                            <a href="{{ url_for('.index') }}">

                              <!--<strong>{{ coll_macro.get_collection_name() }}</strong>-->
                              <strong>Coleção</strong>
                            </a>
                            <ul>
                                <li>
                                  <a href="{{ url_for('.collection_list') }}?status=current" class="tab_link">
                                    Lista alfabética de periódicos
                                  </a>
                                </li>
                                <li>
                                  <a href="{{ url_for('.collection_list_thematic') }}?status=current" class="tab_link">
                                    Lista temática de periódicos
                                  </a>
                                </li>
                                <li>
                                  <a href="{{ config.URL_SEARCH }}?q=*&lang={% if session.lang %}{{ session.lang[:2] }}{% endif %}&filter[in][]={{config.OPAC_COLLECTION}}">
                                    Busca
                                  </a>
                                </li>
                                <li>
                                  <a target="_blank" href="{{ config.METRICS_URL }}/?collection={{ config.OPAC_COLLECTION }}">
                                    Métricas
                                  </a>
                                </li>
                                <!--
                                <li>
                                  <a href="{{ url_for('.about_collection') }}">
                                    Sobre: {{ coll_macro.get_collection_name() }}
                                  </a>
                                </li>
                                -->
                                <li>
                                  <a href="{{ url_for('.about_collection') }}">
                                    Sobre: Coleção
                                  </a>
                                </li>
                                <li>
                                  <a href="{{ url_for('.about_collection') }}">
                                    Contatos
                                  </a>
                                </li>
                            </ul>
                          </li>
                          <li>
                            <a href="#">
                              <strong>SciELO.org - Rede SciELO</strong>
                            </a>
                            <ul>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}">
                                  Coleções nacionais e temáticas
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_title }}">
                                    Lista alfabética de periódicos
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_subject }}">
                                    Lista de periódicos por assunto
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SEARCH }}">
                                  Busca
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}">
                                  Coleções nacionais e temáticas
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_title }}">
                                    Lista alfabética de periódicos
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_subject }}">
                                    Lista de periódicos por assunto
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SEARCH }}">
                                  Busca
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}">
                                  Coleções nacionais e temáticas
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_title }}">
                                    Lista alfabética de periódicos
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_subject }}">
                                    Lista de periódicos por assunto
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SEARCH }}">
                                  Busca
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}">
                                  Coleções nacionais e temáticas
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_title }}">
                                    Lista alfabética de periódicos
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.journals_by_subject }}">
                                    Lista de periódicos por assunto
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SEARCH }}">
                                  Busca
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.METRICS_URL }}">
                                  Métricas
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.oai_and_rss }}">
                                    Acesso OAI e RSS
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.about_network }}">
                                    Sobre a Rede SciELO
                                </a>
                              </li>
                              <li>
                                <a target="_blank" href="{{ config.URL_SCIELO_ORG }}{{ g.scielo_org.contact }}">
                                  Contatos
                                </a>
                              </li>
                            </ul>
                          </li>
                          <li>
                              <a target="_blank" href="{{ config.URL_BLOG_SCIELO }}/{{ session.lang }}/">
                                <strong>Blog SciELO em Perspectiva</strong>
                              </a>
                          </li>
                        </ul>
                    </nav>
                </div>

            </div>
        </div>
    </div>
    <script>
        /* touchSideSwipe v0.3.1
        * https://github.com/Lucyway/touch-sideswipe
        * 2018 (c) Mititelu Nick (aka freetitelu). MIT license.
        */
        (function(root, factory) {
            'use strict';
            if (typeof define === 'function' && define.amd) {
                define(factory);
            } else if (typeof module === 'object' && module.exports) {
                module.exports = factory();
            } else {
                root.TouchSideSwipe = factory();
            }
        }(this, function() {
            var TouchSideSwipe = function(config) {
                'use strict';
                //------------------------------------------------------------------
                var opt = { //default options
                    elInitID: config.elementID || 'touchSideSwipe',
                    elSubmainWidth: config.elementWidth || 400, //px
                    elSubmainMaxWidth: config.elementMaxWidth || 0.8, // *100%
                    sideHookWidth: config.sideHookWidth || 44, //px
                    moveSpeed: config.moveSpeed || 0.2, //sec
                    opacityBackground: config.opacityBackground || 0.8,
                    shiftForStart: config.shiftForStart || 50, // px
                    windowMaxWidth: config.windowMaxWidth || 1024, // px
                };
                //------------------------------------------------------------------
                var winInnerWidth = window.innerWidth;
                var touchstartCoordX;
                var touchmoveCoordX;
                var open;
                var elMainCoordX0;
                var elInit;
                var elMain;
                var elSubmain;
                var elLabel;
                var elBg;
                var elSubmainWidth;
                var elMainWidth;
                var init = false;

                //------------------------------------------------------------------
                // create, define, customize initial elements and states
                //------------------------------------------------------------------
                function tssInitStates() {
                    init = true;
                    //-------------------------------
                    // create DOM-elements: main-wrapper, sub-wrapper, label, background
                    //-------------------------------
                    elInit = document.getElementById(opt.elInitID);
                    elMain = document.createElement('div');
                    elSubmain = document.createElement('div');
                    elLabel = document.createElement('div');
                    elLabel.innerHTML = '<div class="tss-label_pic"></div>';
                    elBg = document.createElement('div');
                    //-------------------------------

                    //-------------------------------
                    // wrap initial-elem in main in submain, add bg in body
                    elMain.appendChild(elSubmain);
                    elSubmain.appendChild(elLabel);
                    elInit.parentNode.insertBefore(elMain, elInit);
                    elSubmain.appendChild(elInit);
                    document.body.insertBefore(elBg, document.body.lastChild);
                    //-------------------------------

                    //-------------------------------
                    // css classes for customize
                    //-------------------------------
                    elMain.classList = 'tss';
                    elSubmain.classList = 'tss-wrap';
                    elLabel.classList = 'tss-label';
                    elBg.classList = 'tss-bg';
                    //-------------------------------

                    //-------------------------------
                    // create first style parameters: width and state wrapped DOM-element
                    //-------------------------------
                    if (winInnerWidth > 499) {
                        elSubmainWidth = opt.elSubmainWidth;
                    } else {
                        elSubmainWidth = winInnerWidth * opt.elSubmainMaxWidth;
                    }
                    elSubmain.style.width = elSubmainWidth + 'px';
                    elMainWidth = elSubmainWidth + opt.sideHookWidth;
                    elMain.style.transitionDuration = opt.moveSpeed + 's';
                    elBg.style.transitionDuration = opt.moveSpeed + 's';
                    //-------------------------------
                    tssClose();
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // recalc parameters on resize window
                //------------------------------------------------------------------
                function tssRecalcStates() {
                    if (open === true) {
                        tssClose();
                    }
                    winInnerWidth = window.innerWidth;
                    if (winInnerWidth > 499) {
                        elSubmainWidth = opt.elSubmainWidth;
                    } else {
                        elSubmainWidth = winInnerWidth * opt.elSubmainMaxWidth;
                    }
                    elMainWidth = elSubmainWidth + opt.sideHookWidth;
                    elSubmain.style.width = elSubmainWidth + 'px';
                    elMain.style.transform = 'translateX(' + (-elSubmainWidth) + 'px)';
                    elMain.style.width = elMainWidth + 'px';
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // start touch-event (use states from tssInitStates, tssRecalcStates)
                //------------------------------------------------------------------
                function tssTouchstart(event) {
                    document.body.style.overflow = 'hidden';
                    elMain.style.transitionDuration = '0s';
                    elBg.style.transitionDuration = '0s';
                    elBg.style.zIndex = 999;
                    elMainCoordX0 = elMain.getBoundingClientRect().left;
                    touchstartCoordX = event.changedTouches[0].clientX;
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // Drag element (use states from tssInitStates, tssRecalcStates, tssTouchstart)
                //------------------------------------------------------------------
                function tssTouchmove(event) {
                    touchmoveCoordX = event.changedTouches[0].clientX;
                    var elMainCoordX0New = touchmoveCoordX - (touchstartCoordX - elMainCoordX0);

                    if ((elMainCoordX0New) <= 0) { // swipe touchmove < elSubmainWidth
                        if (touchstartCoordX > elSubmainWidth) { //if opened and touchstart over elSub
                            elMainCoordX0New = elMainCoordX0New + (touchstartCoordX - elSubmainWidth);
                        }
                        if (touchmoveCoordX <= elSubmainWidth) {
                            elMain.style.transform = 'translateX(' + elMainCoordX0New + 'px)';
                        }
                        var elBgOpacity = touchmoveCoordX / elSubmainWidth;
                        if (elBgOpacity > 0 && elBgOpacity < 1) {
                            if (elBgOpacity >= opt.opacityBackground) {
                                elBg.style.opacity = opt.opacityBackground;
                            } else {
                                elBg.style.opacity = elBgOpacity;
                            }
                        }
                    }
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // end touch-event (use states from tssInitStates, tssRecalcStates, tssTouchmove)
                //------------------------------------------------------------------
                function tssTouchend(event) {
                    var touchendCoordX = event.changedTouches[0].clientX;
                    document.body.style.overflow = '';
                    elMain.style.transitionDuration = opt.moveSpeed + 's'; //todo: перетащить в open/close
                    elBg.style.transitionDuration = opt.moveSpeed + 's';
                    if (!open && touchendCoordX > touchstartCoordX) {
                        if (Math.abs(touchstartCoordX - touchendCoordX) > opt.shiftForStart) {
                            tssOpen();
                        } else {
                            tssClose();
                        }
                    } //touchendCoordX!==touchstartCoordX, equal for click event
                    else if (!open && touchendCoordX < touchstartCoordX) { // if not opened and drag move left 
                        tssClose();
                    }
                    else if (open && (touchendCoordX < touchstartCoordX) && (touchendCoordX <= elSubmainWidth)) {
                        if ((touchstartCoordX > elSubmainWidth) && (touchendCoordX < (elSubmainWidth - opt.shiftForStart)) ||
                            (touchstartCoordX < elSubmainWidth) && (Math.abs(touchstartCoordX - touchendCoordX) > opt.shiftForStart)) {
                            tssClose();
                        } else {
                            tssOpen();
                        }
                    }
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // open/close on click label-element
                //------------------------------------------------------------------
                function elLabelClick(event) {
                    event.stopPropagation();
                    if (open === false) {
                        tssOpen();
                    } else {
                        tssClose();
                    }
                }

                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // open/close on click background-element
                //------------------------------------------------------------------
                function elBgClick(event) {
                    event.stopPropagation();
                    var elMainCoordX0ForClick = elMain.getBoundingClientRect().left;
                    if (event.clientX > (elMainCoordX0ForClick + elSubmainWidth)) {
                        tssClose();
                    }
                }

                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // change states on Open
                //------------------------------------------------------------------
                function tssOpen() {
                    elBg.style.opacity = opt.opacityBackground;
                    elMain.style.width = winInnerWidth + 'px';
                    elMain.style.transform = 'translateX(0px)';
                    elMain.classList.remove('tss--close');
                    elMain.classList.add('tss--open');
                    elBg.classList.remove('tss-bg--close');
                    elBg.classList.add('tss-bg--open');
                    elBg.style.zIndex = '999';
                    open = true;
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // change states on Close
                //------------------------------------------------------------------
                function tssClose() {
                    document.body.style.overflow = '';
                    elBg.style.opacity = 0;
                    elMain.style.width = elMainWidth + 'px';
                    elMain.style.transform = 'translateX(' + (-elSubmainWidth) + 'px)';
                    elMain.classList.remove('tss--open');
                    elMain.classList.add('tss--close');
                    elBg.classList.remove('tss-bg--open');
                    elBg.classList.add('tss-bg--close');
                    elBg.style.zIndex = '-999';
                    open = false;
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // tssClear (for large-width windows)
                //------------------------------------------------------------------
                function tssClear() {
                    if ((elMain && elBg) != undefined) {
                        elMain.parentNode.insertBefore(elInit, elMain);
                        elMain.remove();
                        elBg.remove();
                        init = false;
                    }
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // winOnresizeEngine (if change width of window)
                //------------------------------------------------------------------
                function winOnresizeEngine(event) {
                    winInnerWidth = window.innerWidth;
                    if (winInnerWidth < opt.windowMaxWidth && !init) {
                        tssActionsEngine();
                    } else if (winInnerWidth >= opt.windowMaxWidth && init) {
                        tssClear();
                    }
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // set of listeners and states
                //------------------------------------------------------------------
                function tssActionsEngine() {
                    if (winInnerWidth < opt.windowMaxWidth && !init) {
                        tssInitStates();
                        window.addEventListener('resize', tssRecalcStates, false);
                        elMain.addEventListener('touchstart', tssTouchstart, {passive: true});
                        elMain.addEventListener('touchmove', tssTouchmove, {passive: true});
                        elMain.addEventListener('touchend', tssTouchend, {passive: true});
                        elMain.addEventListener('click', elBgClick, false);
                        elLabel.addEventListener('click', elLabelClick, false);
                    }
                    window.addEventListener('resize', winOnresizeEngine, false);
                }
                //------------------------------------------------------------------

                //------------------------------------------------------------------
                // aaaand actioooon!
                //------------------------------------------------------------------
                tssActionsEngine();

                //public functions
                var returnTssOpen;
                var returnTssClose;
                function tssRecalcApi(){// if not mobile window width
                    if (winInnerWidth > opt.windowMaxWidth) {
                        var returnTssFailed = '(touch-sideswipe) cant use when window inner width > ' + opt.windowMaxWidth + 'px (your actual option windowMaxWidth). Please, add the condition here.';
                        returnTssOpen = function(){console.log('tssOpen ' + returnTssFailed )};
                        returnTssClose = function(){console.log('tssClose ' + returnTssFailed)};
                    }
                    else {
                        returnTssOpen = tssOpen;
                        returnTssClose = tssClose;
                    }
                }
                tssRecalcApi();
                window.addEventListener('resize', tssRecalcApi, false);
                
                return {
                    tssOpen: returnTssOpen,
                    tssClose: returnTssClose
                }

            };
            return TouchSideSwipe;
        }));

    </script>
    <script>

        var config = {
            elementID: 'touchSideSwipe',
            elementWidth: 400, //px
            elementMaxWidth: 0.8, // *100%
            sideHookWidth: 44, //px
            moveSpeed: 0.2, //sec
            opacityBackground: 0.8,
            shiftForStart: 50, // px
            windowMaxWidth: 1024, // px
        }
        var touchSideSwipe = new TouchSideSwipe(config);

        // demo open/close on load document
        setTimeout(function() {touchSideSwipe.tssOpen()}, 2000);
        setTimeout(function() {touchSideSwipe.tssClose()}, 3500);
        // demo open/close buttons
        document.getElementById('callOpen').addEventListener('click', function(){touchSideSwipe.tssOpen()});
        document.getElementById('callClose').addEventListener('click', function(){touchSideSwipe.tssClose()});
    </script> 
    
</body>
</html>
 